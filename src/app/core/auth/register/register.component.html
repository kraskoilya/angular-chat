<section>
  <form class="auth-form d-flex flex-column"
        *ngIf="form"
        [formGroup]="form"
        (ngSubmit)="send()"
        autocomplete="off">

    <section class="d-flex justify-content-between">
      <h1>Registration</h1>

      <a class="btn-link ml-auto"
         [routerLink]="['/' + appRoutes.LOGIN]"
         routerLinkActive="router-link-active">Sign In</a>
    </section>

    <div class="d-flex">
      <div class="auth-form__control form-control d-flex flex-column">
        <label for="first_name">First name</label>
        <input formControlName="first_name"
               type="text"
               placeholder="First name"
               name="first_name"
               id="first_name">

        <div *ngIf="form.get('first_name')?.invalid &&
                                        form.get('first_name')?.errors &&
                                        (form.get('last_name')?.dirty || form.get('first_name')?.touched)">
          <small class="text-danger"
                 *ngIf="form.get('first_name')?.hasError('required')">
            This field is required.
          </small>
          <small class="text-danger"
                 *ngIf="form.get('first_name')?.hasError('maxlength')">
            The maximum length for this field is {{form.get('first_name')?.errors?.maxlength?.requiredLength}} characters.
          </small>
        </div>
      </div>

      <div class="auth-form__control form-control ml-10 d-flex flex-column">
        <label for="last_name">Last name</label>
        <input formControlName="last_name"
               placeholder="Last name"
               type="text"
               name="last_name"
               id="last_name">

        <div *ngIf="form.get('last_name')?.invalid &&
                                              form.get('last_name')?.errors &&
                                              (form.get('last_name')?.dirty || form.get('last_name')?.touched)">
          <small class="text-danger"
                 *ngIf="form.get('last_name')?.hasError('required')">
            This field is required.
          </small>
          <small class="text-danger"
                 *ngIf="form.get('last_name')?.hasError('maxlength')">
            The maximum length for this field is {{form.get('last_name')?.errors?.maxlength?.requiredLength}} characters.
          </small>
        </div>
      </div>
    </div>

    <div class="auth-form__control form-control">
      <label for="email">Login</label>
      <input formControlName="email"
             type="text"
             placeholder="Login"
             name="email"
             id="email">

      <div *ngIf="form.get('email')?.invalid &&
                                form.get('email')?.errors &&
                                (form.get('email')?.dirty || form.get('email')?.touched)">
        <small class="text-danger"
               *ngIf="form.get('email')?.hasError('required')">
          This field is required.
        </small>

        <small class="text-danger"
               *ngIf="form.get('email')?.hasError('email')">
          Inccorect email
        </small>
      </div>
    </div>

    <div class="auth-form__control auth-form__control--eye form-control">
      <label for="password">Password</label>
      <input formControlName="password"
             type="password"
             placeholder="Password"
             name="password"
             id="password"
             #passwordEl>

      <button (click)="passwordEl.type == 'password' ? passwordEl.type = 'text' : passwordEl.type = 'password'"
              type="button"
              class="btn-epmty btn-eye"
              tabindex="-1">

        <div *ngIf="passwordEl.type == 'password'"
             class="eye"
             [inlineSVG]="'/eye-hide.svg'"></div>

        <div *ngIf="passwordEl.type == 'text'"
             class="eye"
             [inlineSVG]="'/eye-show.svg'"></div>
      </button>

      <div *ngIf="form.get('password')?.invalid &&
                    form.get('password')?.errors &&
                    (form.get('password')?.dirty || form.get('password')?.touched)">
        <small class="text-danger"
               *ngIf="form.get('password')?.hasError('required')">
          This field is required.
        </small>
        <small class="text-danger"
               *ngIf="form.get('password')?.hasError('minlength')">
          The minimum length for this field is {{form.get('password')?.errors?.minlength?.requiredLength}} characters.
        </small>
        <small class="text-danger"
               *ngIf="form.get('password')?.hasError('mustMatch')">
          Passwords mismatch
        </small>
      </div>
    </div>

    <div class="auth-form__control auth-form__control--eye form-control">
      <label for="password_confirmation">Confirm password</label>
      <input formControlName="password_confirmation"
             type="password"
             placeholder="Confirm password"
             name="password_confirmation"
             id="password_confirmation"
             #password_confirmation>

      <button (click)="password_confirmation.type == 'password' ? password_confirmation.type = 'text' : password_confirmation.type = 'password'"
              type="button"
              class="btn-epmty btn-eye"
              tabindex="-1">

        <div *ngIf="password_confirmation.type == 'password'"
             class="eye"
             [inlineSVG]="'/eye-hide.svg'"></div>

        <div *ngIf="password_confirmation.type == 'text'"
             class="eye"
             [inlineSVG]="'/eye-show.svg'"></div>
      </button>

      <div *ngIf="form.get('password_confirmation')?.invalid &&
              form.get('password_confirmation')?.errors &&
              (form.get('password_confirmation')?.dirty || form.get('password_confirmation')?.touched)">
        <small class="text-danger"
               *ngIf="form.get('password_confirmation')?.hasError('required')">
          This field is required.
        </small>
        <small class="text-danger"
               *ngIf="form.get('password_confirmation')?.hasError('minlength')">
          The minimum length for this field is {{form.get('password_confirmation')?.errors?.minlength?.requiredLength}} characters.
        </small>
        <small class="text-danger"
               *ngIf="form.get('password_confirmation')?.hasError('mustMatch')">
          Passwords mismatch
        </small>
      </div>
    </div>

    <section class="error-block"
             *ngIf="errorMessage">
      <p class="mb-0">
        {{errorMessage}}
      </p>
    </section>

    <section class="ml-auto">
      <button class="btn"
              type="submit">Registration</button>
    </section>

  </form>
</section>
